<section class="wh-content-head">
  {{#if fullPreviewUrl }}
    {{#unless type.oneOff}}
    <a target="_blank" {{ bind-attr href="fullPreviewUrl" }} class="btn icon icon-eye-open btn-preview btn-small btn-info"> Preview</a>
    {{/unless}}
  {{/if}}
  <h1>{{#if itemModel}}Edit{{else}}New{{/if}} {{type.name}}{{#unless type.oneOff}} &raquo; {{nameControl.value}}{{/unless}}</h1>
</section>
{{#if itemModel}}
  <section class="wh-content-subhead">
    <span class="wh-item-publish-time-section">{{#if createDate}}Created on <span>{{format-time createDate format="MMM Do, YYYY."}}</span>{{/if}}</span>
    <span class="wh-item-publish-time-section">{{#if lastUpdated}}Last updated on <span>{{format-time lastUpdated format="MMM Do, YYYY. h:mm A"}}</span>{{/if}}</span>
    {{#if type.canDelete}}<a class="icon icon-trash wy-text-danger" {{action "deleteItem" itemModel}}> Delete</a>{{/if}}
  </section>
{{/if}}
<section class="wh-content-edit">

  <div {{bind-attr class="isNameAndSlugValid::wy-control-group-error :wy-control-group :wy-control-group-required :wh-slug"}}>
    <label>Name</label>
    <div class="wy-control">
      {{#if nameControl.placeholder}}
        {{input class="big-name" placeholder=nameControl.placeholder value=nameControl.value autofocus="true" disabled=nameControl.disabled}}
      {{else}}
        {{input class="big-name" placeholder="Fill me in!" value=nameControl.value autofocus="true" disabled=nameControl.disabled}}
      {{/if}}

      {{#if nameControl.widgetErrors}}
        <ul>
          {{#each nameControl.widgetErrors}}
            <li><span class="wy-form-message">{{this}}</span></li>
          {{/each}}
        </ul>
      {{/if}}

      {{#if showSlug}}

        {{#if isEditingSlug}}
          <span class="wy-form-message">This page will live at /{{input value=slugControl.value placeholder=defaultSlug focus-out="forceSlug"}}/ <span class="icon icon-ok-sign" {{action "editSlug"}}></span></span>
        {{else}}
          {{#if slugControl.disabled}}
            <span class="wy-form-message">This page will live at /{{#if slugControl.value}}{{slugControl.value}}{{else}}{{defaultSlug}}{{/if}}/</span>
          {{else}}
            <span class="wy-form-message">This page will live at <a href="#" {{action "editSlug"}}>/{{#if slugControl.value}}{{slugControl.value}}{{else}}{{defaultSlug}}{{/if}}/ <span class="icon icon-pencil"></span></a></span>
          {{/if}}
        {{/if}}

        {{#if slugControl.widgetErrors}}
          <ul>
            {{#each slugControl.widgetErrors}}
              <li><span class="wy-form-message">{{this}}</span></li>
            {{/each}}
          </ul>
        {{/if}}

      {{/if}}
    </div>
  </div>

  {{#view 'item-form'}}
    <fieldset>

      <div class="wy-control-group wy-control-group-grid">
        <label>My Grid name</label>
        <div class="wy-control">
          <!-- FIRST ITEM -->
          <!-- FIRST ITEM -->
          <!-- FIRST ITEM -->

          <!-- ACTIVE IF IT'S ON -->
          <div class="wh-grid-value active">
            <span class="icon icon-ellipsis-v"></span>
            <span class="wh-grid-num">1</span>
            <span class="wh-grid-value-name">First field value</span>
            <span class="icon icon-remove-sign" data-toggle="tooltip" title="Delete this row."></span>
            <span class="icon icon-plus-sign" data-toggle="tooltip" title="Add a new row below this one."></span>
          </div>
          <!-- NOT ACTIVE -->
          <div class="wh-grid-form">
            <div class="wy-control-group">
              <label>Text field</label>
              <div class="wy-control">
                <input type="text" placeholder="placeholder"/>
              </div>
            </div>
            <div class="wy-control-group">
              <label>Textarea</label>
              <div class="wy-control">
                <textarea></textarea>
              </div>
            </div>
            <div class="wy-control-group">
              <label>Checkbox</label>
              <div class="wy-control">
                <label class="wy-checkbox">
                  <input type="checkbox">
                  Option 1
                </label>
                <label class="wy-checkbox">
                  <input type="checkbox">
                  Option 2
                </label>
              </div>
            </div>
          </div>
          <!-- SECOND ITEM -->
          <!-- SECOND ITEM -->
          <!-- SECOND ITEM -->

          <!-- ACTIVE IF IT'S ON -->
          <div class="wh-grid-value active">
            <span class="icon icon-ellipsis-v"></span>
            <span class="wh-grid-num">2</span>
            <span class="wh-grid-value-name">First field value</span>
            <span class="icon icon-remove-sign" data-toggle="tooltip" title="Delete this row."></span>
            <span class="icon icon-plus-sign" data-toggle="tooltip" title="Add a new row below this one."></span>
          </div>
          <!-- NOT ACTIVE -->
          <div class="wh-grid-form">
            <div class="wy-control-group">
              <label>Text field</label>
              <div class="wy-control">
                <input type="text" placeholder="placeholder"/>
              </div>
            </div>
            <div class="wy-control-group">
              <label>Textarea</label>
              <div class="wy-control">
                <textarea></textarea>
              </div>
            </div>
            <div class="wy-control-group">
              <label>Checkbox</label>
              <div class="wy-control">
                <label class="wy-checkbox">
                  <input type="checkbox">
                  Option 1
                </label>
                <label class="wy-checkbox">
                  <input type="checkbox">
                  Option 2
                </label>
              </div>
            </div>
          </div>

          <!-- THIRD ITEM -->
          <!-- THIRD ITEM -->
          <!-- THIRD ITEM -->
          <div class="wh-grid-value">
            <span class="icon icon-ellipsis-v"></span>
            <span class="wh-grid-num">1</span>
            <span class="wh-grid-value-name">First field value</span>
            <span class="icon icon-remove-sign" data-toggle="tooltip" title="Delete this row."></span>
            <span class="icon icon-plus-sign" data-toggle="tooltip" title="Add a new row below this one."></span>
          </div>
          <div class="wh-grid-form active">
            <div class="wy-control-group">
              <label>Text field</label>
              <div class="wy-control">
                <input type="text" placeholder="placeholder"/>
              </div>
            </div>
            <div class="wy-control-group">
              <label>Textarea</label>
              <div class="wy-control">
                <textarea></textarea>
              </div>
            </div>
            <div class="wy-control-group">
              <label>Checkbox</label>
              <div class="wy-control">
                <label class="wy-checkbox">
                  <input type="checkbox">
                  Option 1
                </label>
                <label class="wy-checkbox">
                  <input type="checkbox">
                  Option 2
                </label>
              </div>
            </div>
            <div class="wy-btn-group">
              <button class="btn btn-small btn-info icon icon-ok-sign"> Done / close</button>
            </div>
          </div>
          <!-- FOURTH ITEM -->
          <!-- FOURTH ITEM -->
          <!-- FOURTH ITEM -->

          <!-- ACTIVE IF IT'S ON -->
          <div class="wh-grid-value active">
            <span class="icon icon-ellipsis-v"></span>
            <span class="wh-grid-num">4</span>
            <span class="wh-grid-value-name">First field value</span>
            <span class="icon icon-remove-sign" data-toggle="tooltip" title="Delete this row."></span>
            <span class="icon icon-plus-sign" data-toggle="tooltip" title="Add a new row below this one."></span>
          </div>
          <!-- NOT ACTIVE -->
          <div class="wh-grid-form">
            <div class="wy-control-group">
              <label>Text field</label>
              <div class="wy-control">
                <input type="text" placeholder="placeholder"/>
              </div>
            </div>
            <div class="wy-control-group">
              <label>Textarea</label>
              <div class="wy-control">
                <textarea></textarea>
              </div>
            </div>
            <div class="wy-control-group">
              <label>Checkbox</label>
              <div class="wy-control">
                <label class="wy-checkbox">
                  <input type="checkbox">
                  Option 1
                </label>
                <label class="wy-checkbox">
                  <input type="checkbox">
                  Option 2
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

      {{#each control in type.controls}}
        {{#unless control.hidden}}
          {{view 'widget' content=control contentType=type}}
        {{/unless}}
      {{/each}}
    </fieldset>
  {{/view}}
</section>

<div class="wh-save-item">
  {{#if type.oneOff}}

    {{#if type.canPublish}}
      <div class="wy-btn-group">
        <button type="button" class="btn btn-small btn-success icon icon-ok-sign" {{action "saveItem"}}> Save</button>
      </div>
    {{/if}}

  {{else}}

    {{#if isDraft}}

      {{#if type.canDraft}}


        <div class="wy-btn-group">
          {{#if type.canPublish}}
            <div class="wy-dropdown wy-dropdown-bubble wy-dropdown-up">
              <button type="button" class="btn btn-small btn-info icon icon-ok-sign"> Save... <span class="icon icon-caret-up"></span></button>
              <dl class="wy-dropdown-menu">
                <dd><a {{action "saveDraft"}}>Save it as a draft</a></dd>
                <dd><a {{action "publishNow"}}>Publish now</a></dd>
                <dd><a {{action "changePublishDate"}}>Publish at a specific time</a></dd>
              </dl>
            </div>
          {{else}}
            <button type="button" class="btn btn-small btn-info icon icon-ok-sign" {{action "saveDraft"}}> Save</button>
          {{/if}}
        </div>

      {{/if}}

    {{/if}}

    {{#if isScheduled}}

      {{#if type.canPublish}}

        <button type="button" class="btn btn-small btn-link float-left" {{action "saveDraft"}}>Save as a draft instead?</button>

        <div class="wy-btn-group">
          <button type="button" class="btn btn-small btn-success icon icon-ok-sign" {{action "publishFuture"}}> Publish at this time</button>
        </div>

        <div class="wy-control-group">
          <div class="wy-control">
            <button type="button" class="btn btn-small btn-link icon icon-clock" {{action "setPublishNow"}}> Set to now?</button>
            {{input type="datetime-local" value=publishDate}}
          </div>
        </div>

      {{else}}
        <span class="wh-save-info">Going live on {{format-time publishDate format="MM/DD/YYYY [at] hh:mmA"}}. </span>
      {{/if}}

    {{/if}}

    {{#if isLive}}

      <span class="wh-save-info">Went live on {{format-time publishDate format="MM/DD/YYYY [at] hh:mmA"}}. </span>

      {{#if type.canPublish}}
        <div class="wy-btn-group" data-toggle="wh-save-item-extra">
          <span class="wh-save-item-more-options">
            <button type="button" class="btn btn-small btn-link icon icon-minus-sign" {{action "saveDraft"}}> Revert to draft</button>
            <button type="button" class="btn btn-small btn-link icon icon-calendar" {{action "changePublishDate"}}> Change publish date?</button>
          </span>
          <button type="button" class="btn btn-small btn-link wh-save-item-extra-btn" data-toggle="wh-save-item-extra-btn">More options</button>
          <button type="button" class="btn btn-small btn-success icon icon-ok-sign" {{action "saveItem"}}> Save</button>
        </div>
      {{/if}}

    {{/if}}

  {{/if}}
</div>
