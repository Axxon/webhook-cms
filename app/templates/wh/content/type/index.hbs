<section class="wh-content-list">
  <section class="wh-content-list-title">
    {{#link-to 'wh.content.type.new' contentType class="btn btn-neutral icon icon-plus-sign btn-preview"}} Add new {{contentType.name}}{{/link-to}}
    <h1>{{contentType.name}}</h1>
  </section>

  <hr>

  <input type="search"  placeholder="Filter coming soon"/>
  <div class="wy-dropdown wy-dropdown-display-options float-right">
    <span class="btn btn-neutral btn-small icon icon-table"> Display <span class="caret"></span></span>
    <dl class="wy-dropdown-menu">
      <dt>Show columns</dt>
      {{#each columnChoices}}
        <dd>
          <span {{bind-attr class=":icon showInCms:icon-ok-sign:icon-circle-blank"}} {{action "toggleShowInCms" this on="click"}}>
            {{label}}
          </span>
        </dd>
      {{/each}}
      <dt>Sort by</dt>
      <dd>
        <span {{bind-attr class=":icon sortedByPublish:icon-ok-sign:icon-circle-blank"}} {{action "sortToggle" "publish_date"}}>
          Publish date
        </span>
      </dd>
      <dd>
        <span {{bind-attr class=":icon sortedByCreated:icon-ok-sign:icon-circle-blank"}} {{action "sortToggle" "create_date"}}>
          Last created
        </span>
      </dd>
      <dd>
        <span {{bind-attr class=":icon sortedByAlpha:icon-ok-sign:icon-circle-blank"}} {{action "sortToggle" "name"}}>
          Alphabetical
        </span>
      </dd>
    </dl>
  </div>

  <table class="wy-table wy-table-bordered-rows wh-content">
    <thead>
      <tr>
        {{#each contentType.controls}}
          {{#if showInCms}}
            <th><span class="wh-content-sort" {{action "sortToggle" name}}>{{label}}</span></th>
          {{/if}}
        {{/each}}
        <th></th>
      </tr>
    </thead>
    <tbody>
      {{#with contentType as contentTypeNav}}
      {{#each item in sortedCmsItems}}
        {{#link-to 'wh.content.type.edit' contentTypeNav.id item.id tagName="tr"}}
          {{#each item.cmsControls}}
          <td {{ bind-attr class=this.controlType.widget }}>{{partial this.controlType.valuePartialPath}}</td>
          {{/each}}
          <td class="wy-table-actions">
            {{#if item.lockedBy}}
              <button type="button" class="btn btn-link icon icon-lock" {{bind-attr title="item.lockedBy"}}></button>
            {{else}}
              <button type="button" class="btn btn-link icon icon-remove-sign" data-toggle="tooltip" title="Delete this row." {{action "deleteItem" item}}></button>
            {{/if}}
          </td>
        {{/link-to}}
      {{/each}}
      {{/with}}
    </tbody>
  </table>
  {{#unless model}}
    <div class="wy-alert wy-alert-warning">
      <span class="icon icon-exclamation-circle"></span> You haven't added any {{contentType.name}} yet.
    </div>
  {{/unless}}
</section>
