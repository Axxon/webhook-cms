<section class="wh-content-head">
  <h1>{{t 'wh.settings.team.invite.title'}}</h1>
</section>

<section class="wh-content-edit">

  <form class="wy-aligned">
    {{#if session.isDeployed}}
      <div class="wy-control-group">
        <label>{{t 'wh.settings.team.invite.instruction'}}</label>
        {{input type="email" required="required" value=inviteEmail }}
        <div class="wy-form-message">{{t 'wh.settings.team.invite.help'}}</div>
      </div>
      <div class="wy-btn-group">
        <button class="btn btn-neutral icon icon-user" {{ bind-attr disabled=isInvalidEmail }} {{ action "sendInvite" }}> {{t 'wh.settings.team.invite.action'}}</button>
      </div>
    {{else}}
      <div class="wy-alert wy-alert-danger">
        <div class="wy-alert-title">{{t 'wh.settings.team.deploy.title'}}</div>
        <p>{{t 'wh.settings.team.deploy.instruction'}}</p>
      </div>
    {{/if}}


    {{#if error}}
      <div class="wy-alert wy-alert-warning">
        <div class="wy-alert-title">{{ error.code }}</div>
        {{error.message}}
      </div>
    {{/if}}

  </form>

</section>


<section class="wh-content-head wh-content-head-again">
  <h1>{{t 'wh.settings.team.current.title'}}</h1>
</section>
<section class="wh-content-subhead">
  {{t 'wh.settings.team.current.description'}}
</section>

<section class="wh-content-edit">

  <table class="wy-table wy-table-bordered-rows full-width">
    <thead>
      <tr>
        <th>{{t 'wh.settings.team.current.email'}}</th>
        <th>{{t 'wh.settings.team.current.permissions'}}</th>
      </tr>
    </thead>
    <tbody>

      {{#each user in allUsers }}
        <tr>
          <td>{{ user.email }}</td>
          <td>
            {{#if user.owner }}
            <div class="wy-dropdown wy-dropdown-bubble">
              <span class="btn btn-neutral icon icon-lock"> {{t 'wh.settings.team.current.owner'}} <span class="caret"></span</span>
              <dl class="wy-dropdown-menu">
                <dd><a href="" {{ action "makeUser" user }}>{{t 'wh.settings.team.current.toContributor'}}</a></dd>
                <dd><a href="" {{ action "removeUser" user }}>{{t 'wh.settings.team.current.remove'}}</a></dd>
              </dl>
            </div>
            {{/if}}
            {{#if user.user }}
              <div class="wy-dropdown wy-dropdown-bubble">
                <span class="btn btn-neutral icon icon-lock"> {{t 'wh.settings.team.current.contributor'}} <span class="caret"></span</span>
                <dl class="wy-dropdown-menu">
                  <dd><a href="" {{ action "makeOwner" user }}>{{t 'wh.settings.team.current.toOwner'}}</a></dd>
                  <dd><a href="" {{ action "removeUser" user }}>{{t 'wh.settings.team.current.remove'}}</a></dd>
                </dl>
              </div>
            {{/if}}
            {{#if user.potential }}
              {{t 'wh.settings.team.current.waiting'}} (<a href="" class="icon icon-remove-sign" {{ action "removePotential" user }}> {{t 'wh.settings.team.current.cancel'}}</a>)
            {{/if}}
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>
</section>
