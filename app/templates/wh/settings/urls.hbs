<section class="wh-content-head">
  Set up URL redirects
</section>

<section class="wh-content-edit">
  <div class="wy-alert">
    <div class="wy-alert-title">Instructions</div>
    <p>
      This page allows you to set up <a href="https://jeffsebring.com/2012/nginx-301-redirects/">301 redirects</a>
      for URLs on your site. It follows the following basic rules:
    </p>
    <ul class="wy-plain-list-disc">
      <li>It only works on Webhook sites using custom domains, not the webhook.org domains.</li>
      <li>Any redirects set here will trump any URL handling you are managing in the CMS or through your directory structure.</li>
    </ul>
  </div>

  {{#unless domain}}
    <div class="wy-alert wy-alert-warning">
      <div class="wy-alert-title">No custom domain</div>
      <p>Redirect rules only work if you have a custom domain set up. {{#link-to 'wh.settings.domain'}}Configure your domain.{{/link-to}}</p>
    </div>
  {{/unless}}

  <table class="wy-table wy-table-bordered-all wy-table-striped wh-table-tabular">
    <thead>
      <tr>
        <th>Redirect URL</th>
        <th>Destination URL</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {{#each redirect in arrangedContent}}
      <tr>
        <td class="wh-tabular-input">{{input value=redirect.pattern}}</td>
        <td class="wh-tabular-input">{{input value=redirect.destination}}</td>
        <td>
          <button class="btn btn-link icon icon-remove-sign" {{action 'removeRedirect' redirect}}></button>
          <button class="btn btn-link" {{action 'moveUp' redirect}}>up</button>
          <button class="btn btn-link" {{action 'moveDown' redirect}}>down</button>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <button class="btn btn-link btn-small icon icon-plus-sign" {{action 'addRedirect'}}> Add a row</button>

  <hr/>

  <button class="btn btn-success icon icon-ok-sign" {{action 'saveRedirects'}} {{ bind-attr disabled=isSaveDisabled }}> Save</button>

</section>
