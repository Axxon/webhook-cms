<div class="wy-control-group-file">

  <div {{ bind-attr class=":wy-form-upload-container wantUploadButton:on" }}>
    <div class="wy-form-upload">

      {{#if hasPreview}}
        <div class="wy-form-upload-image">
          {{#if control.value.resize_url}}
            {{#view 'fluidbox' image=control.value}}
              {{resize-image control.value size="150"}}
            {{/view}}
          {{else}}
            <img {{ bind-attr src=tempUrl }}>
          {{/if}}
        </div>
      {{/if}}

      {{#unless control.disabled}}
        <div class="wy-form-upload-content">
          <button type="button" class="btn btn-neutral icon icon-image"> {{#if control.value }}{{t 'form.control.image.replace'}}{{else}}{{t 'form.control.image.action'}}{{/if}}</button>
          <div class="image-loading btn btn-info">
            <div class="wy-spinner"></div>
            <span></span>
          </div>
        </div>
      {{/unless}}

    </div>

    {{#unless control.disabled}}
      <button type="button" class="btn btn-link btn-small upload-method-toggle" {{action "toggleMethod"}}>{{t 'form.control.file.url'}}</button>

      {{#if control.value.url}}
        <button type="button" class="btn btn-link btn-small icon wy-text-danger icon-remove-sign" {{action "clear"}}> {{t 'form.control.file.remove'}}</button>
      {{/if}}
    {{/unless}}
  </div>

  {{#unless control.disabled}}
    <div {{ bind-attr class=":wy-form-upload-url :wy-input-prefix wantUrlInput:on" }}>
      <span class="wy-input-context">{{t 'form.control.file.paste'}} <span class="icon icon-arrow-right"></span></span><input type="text">
      <button type="button" class="btn btn-neutral btn-small upload-url">{{t 'form.control.file.upload'}}</button>
      <button type="button" class="btn btn-small btn-link upload-method-toggle wy-text-danger icon icon-remove-sign" {{action "toggleMethod"}}> {{t 'form.control.file.cancel'}}</button>
    </div>
  {{/unless}}

</div>
