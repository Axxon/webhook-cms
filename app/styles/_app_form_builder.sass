// ------------------------------------------------------------
// WEBHOOK FORM-BUILDER
// ------------------------------------------------------------
// The form builder creates new forms in the CMS. It lives
// outside of the main grid, but still uses some of its
// naming conventions.
// ------------------------------------------------------------

.wh-grid-form-builder
  +outer-container
  width: 100%
  max-width: 100%

.wh-form-builder
  background: $gray-dark

.wh-form-builder-mask
  background: rgba(0,0,0,.8)
  filter: blur(10px)
  -webkit-filter: blur(10px)
  position: absolute
  z-index: 2
  left: 0
  right: 0
  bottom: 0
  top: 0

.wh-form-builder-empty
  border: dashed 5px $table-border-color
  text-align: center
  padding: $base-line-height
  position: relative
  margin-top: -200px
  p
    margin-bottom: 0


.wh-form-builder-list
  +outer-container
  > li
    background: $white
    padding: $base-line-height
    border: solid 1px $gray
    border-top: solid 5px $gray
    margin-bottom: $base-line-height
    position: relative
    +transition(all 0.1s linear)
    +span-columns(4)
    +omega-type(3n)
  > li.wh-form-builder-new
    opacity: .3
    background: transparent
    &:hover
      opacity: 1
      background: $white
      border: solid 1px $gray
      border-top: solid 5px $gray
      h4
        color: $green

// THE FB DOESN'T WORK IN MOBILE.
.wh-form-builder-mobile
  display: none
  text-align: center
  padding: $gutter
  img
    width: 200px
    height: 200px
    margin-bottom: $base-line-height

// STICKY LEFT MENU

.wh-form-builder
  .wy-affix .wh-logo
    margin-top: $base-line-height / 2

// LEFT MENU FOR FORM BUILDER

.wh-form-builder .wy-nav-side
  background: $gray-dark
  color: $text-lighter
  width: 400px
  padding: $base-line-height / 2 $base-line-height / 4
  .wh-logo-spinner:after
    border: 4px solid darken($gray,5%)
    border-top: 4px solid $gray-dark
  dl
    +clearfix
    margin-bottom: $base-line-height / 2
  dt
    font-weight: bold
    font-size: 80%
    padding: $base-line-height / 4
    width: 100%
    color: $text-lighter
    +clearfix
  dd
    width: 50%
    float: left
    padding: $base-line-height / 4
  dd a
    display: block
    background: darken($gray-dark,5%)
    border-radius: 2px
    width: 100%
    padding: $base-line-height / 4
    color: $text-medium
    font-size: 90%
    cursor: pointer
    word-spacing: 3px
    &:before
      color: $text-light
    &:hover
      color: $text-lighter
      border-color: $gray-lighter
      background: darken($gray-dark,10%)
      &:before
        color: $text-invert

  .wh-form-builder-note
    margin: -12px -6px 0 -6px
    padding: $base-line-height / 2
    padding-bottom: 0
    background: $gray

.wh-form-builder-tabs
  margin: 0 -6px
  margin-bottom: $base-line-height / 2
  padding: $base-line-height / 2
  padding-bottom: 0
  background: $gray
  border-bottom: solid 2px $gray-darker
  +clearfix
  li
    width: 50%
    display: block
    float: left
    padding: $base-line-height / 4
    text-align: center
    color: $white
    border-radius-top: 4px
    color: $text-medium
    cursor: pointer
    border-top-left-radius: 4px
    border-top-right-radius: 4px
    &:hover
      color: $white
    &.active
      background: $gray-darker
      border: none
      color: $text-invert
    .fa
      color: lighten($blue, 20%)

// LEFT SIDE EDIT MODE
// When you click an individual field on the right
// this stuff shows up.

.wy-nav-side.wy-nav-side-widget-edit
  background: $gray-dark
  display: none
  form
    padding: $base-line-height / 2
  .wy-control-group
    margin-bottom: 0
  legend
    padding: $base-line-height / 4
    margin: 0
  label
    color: $text-lighter
  label.wy-checkbox, label.wy-radio
    color: $text-medium
  hr
    border-color: $gray
    margin: 0
    margin-bottom: $base-line-height / 2
  .icon-question-sign
    color: $text-dark
  .icon:hover
    color: $white
  label .icon-plus-sign:hover
    color: $green
  label .icon-remove-sign:hover
    color: $red
  input[type=text], textarea, input[type=number],
    background: darken($gray-dark,5%)
    border-color: $gray-darker
    color: $text-light
    box-shadow: none
  ::-webkit-input-placeholder
    color: $gray
  .edit-instruction, .warning
    font-size: 80%
    line-height: 1.5
    margin-bottom: $base-line-height / 2
    background: rgba(255,255,255,.1)
    padding: $base-line-height / 2
    margin-bottom: $base-line-height / 2
    strong
      color: lighten($blue, 20%)
      display: block
  .warning strong
    color: lighten($red, 20%)
  code
    background: $gray-dark
    border: none


// RIGHT SIDE OF FORM BUILDER
// This is the actual form you're building

.wh-form-builder .wy-nav-content-wrap
  margin-left: 400px
  .wy-nav-content
    padding-bottom: 100px
  .wh-logo
    +wh-logo(40px,$gray-dark)
    display: inline-block
  .wh-form-builder-save
    position: fixed
    bottom: 0
    left: 400px
    right: 0
    background: $menu-background-color
    border-top: solid 1px rgba(0,0,0,.1)
    padding: $base-line-height
    margin-bottom: 0
    z-index: $z-index-tray
    .btn
      margin-left: $base-line-height / 2
    .wh-logo
      margin-right: $base-line-height / 2
  .wh-form-builder-title
    border: dashed 1px transparent
    border-bottom: dashed 1px $gray-light
    padding: $base-line-height / 4
    &.wh-form-builder-title-set:hover
      border: dashed 1px $gray-light
      cursor: pointer
  .wy-control-group
    padding: $base-line-height / 2
    margin-bottom: 0
    border: solid 1px transparent
    position: relative
    opacity: 1
    +transition(background .2s linear, height .2s linear, opacity .2s linear, margin-left .2s linear)
  .wy-control-group:hover
    border: dashed 1px $gray-light
    cursor: pointer
  .wy-control-group-instruction
    margin-left: $base-line-height / 2
    margin-right: $base-line-height / 2
    label
      margin-left: -$base-line-height / 2
      margin-right: -$base-line-height / 2
  .disabled
    position: absolute
    display: block
    top: 0
    left: 0
    content: ""
    width: 100%
    height: 100%
    background: transparent
    z-index: $z-index-popover - 1
  .wy-control-group-grid .wh-grid-form
    position: relative
    .ui-sortable
      min-height: 350px
  .wy-control-group-grid > .disabled
    display: none
  .wy-control-group-grid .wh-form-builder-empty
    position: absolute
    margin: 0
    top: $base-line-height
    left: $base-line-height
    right: $base-line-height

  // Clicked state for individual fields
  .wy-control-group.wy-control-group-edit
    background: $table-stripe-color
    margin-left: -$gutter * 2
    margin-right: - $gutter * 2
    padding-left: $gutter * 2 + em($base-line-height / 2)
    padding-right: $gutter * 2 + em($base-line-height / 2)
    box-shadow: 0 8px 6px -6px rgba(0,0,0,.2)
    border: solid 1px $white !important
    label, .wy-form-message
      color: $text-color
    &:not(.wy-control-group-instruction) .wh-template-var
      opacity: 1
      color: $text-dark
    &:hover
      border-color: transparent
    &:after
      font-family: 'hook'
      content: "\f05a"
      height: 30px
      width: 30px
      font-size: 30px
      position: absolute
      left: 10px
      top: 50%
      margin-top: -15px
      z-index: $z-index-popover + 1
    .wy-control
      +clearfix

// DRAG AND DROP CONTROLS
// Various classes needed for the drag and drop bits
// of the form builder.

.ui-sortable-helper .wy-control-group
  background: rgba(255,255,255,.7)
  border: dashed 1px $gray-lighter !important
  cursor: move !important

.wh-form-builder .ui-sortable
  min-height: 500px

.wh-form-control-placeholder
  background: $gray-darker
  text-align: center
  height: 75px
  opacity: .7
  &:after
    content: "Drop to place here."
    color: $white
    font-size: 150%
    line-height : 75px
.wy-control-group-placed
  background: lighten($green, 30%) !important

.wh-control-group-dragged
  background: rgba(255,255,255,.8) !important
  border: dashed 3px $gray-dark !important
  box-shadow: none !important
  .wh-grid-form
    display: none !important
.wy-control-group-removed
  height: 0px
  padding-top: 0px !important
  padding-bottom: 0px !important
  opacity: 0
  overflow: hidden
.wh-form-control-clone
  padding: $base-line-height
  color: $gray-darker
  background: rgba(255,255,255,.8)
  width: 50%
  border: dashed 1px $gray-lighter !important
  z-index: $z-index-tooltip + 1
  &:after
    content: "Drop me in form"
    color: $gray-dark
    float: right

// RESPONSIVE STYLES

+media($tablet)
  .wh-form-builder-list > li
    +span-columns(4)
    +omega-type(2n)
  .wh-form-builder
    display: none
  .wh-form-builder-mobile
    display: block

+media($mobile)
  .wh-form-builder-list > li
    +span-columns(4)
    +omega(1n)
  .wh-form-builder
    display: none
  .wh-form-builder-mobile
    display: block
